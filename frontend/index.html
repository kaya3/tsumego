<!DOCTYPE html>
<html>
<body>
    <script src="out/tsumego.js"></script>
    <script type="text/javascript">
        TsumegoAPI.loadAllTsumego().then(allTsumego => {
            let index = 0;
            const view = new TsumegoView(allTsumego[0]);
            
            view.onComplete(win => {
                console.log(win ? 'You won!' : 'You lost');
                
                index = (index + 1) % allTsumego.length;
                setTimeout(() => view.setTsumego(allTsumego[index]), 1000);
            });
            
            document.body.appendChild(view.canvas);
            function loop() {
                view.draw();
                requestAnimationFrame(loop);
            }
            loop();
        });
    </script>
</body>
</html>