<!DOCTYPE html>
<html>
<body>
    <script src="out/tsumego.js"></script>
    <script type="text/javascript">
        TsumegoAPI.loadAllTsumego().then(allTsumego => {
            let index = 0;
            const view = new TsumegoView(allTsumego[0]);
            
            view.onComplete(win => {
                console.log(win ? 'You won!' : 'You lost');
                
                index = (index + 1) % allTsumego.length;
                setTimeout(() => view.setTsumego(allTsumego[index]), 1000);
            });
            
            document.body.appendChild(view.canvas);
            function loop() {
                view.draw();
                requestAnimationFrame(loop);
            }
            loop();
        });
    </script>
    
    <form action="/api/login" method="post">
        <div style="display: flex; flex-direction: column;">
            <div style="display: flex; flex-direction: row;">
                <label for="email">Email:</label>
                <input name="email">
            </div>
            <div style="display: flex; flex-direction: row;">
                <label for="password">Password:</label>
                <input name="password" type="password">
            </div>
            <div style="display: flex; flex-direction: row; align-items: center;">
                <input type="submit" value="Log in">
            </div>
        </div>
    </form>
    <form action="/api/logout" method="post">
        <input type="submit" value="Log out">
    </form>
</body>
</html>